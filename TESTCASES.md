# Задание 2.1 ТЕСТ-КЕЙСЫ

## 1. POST /api/1/item

### TC-01 — Успешное создание объявления
ID: TC-01

Предусловия: Нет.

Тестовые данные:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "price": 50001,
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным валидным телом запроса.

Ожидаемые результаты:
1. Сервер возвращает HTTP 200 OK.
2. В ответе приходит JSON со структурой:
```json
{
  "id": "string",
  "sellerId": 117177,
  "name": "krbll",
  "price": 50001,
  "createdAt": "string",
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```

Постусловия:
1. Удалить созданное объявление через DELETE /api/2/item/{id}.

Связанные баги: BUG-01.

---

### TC-02 — Создание объявления с пустым JSON
ID: TC-02

Предусловия: Нет.

Тестовые данные:
```json
{}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с телом {}.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. В теле ответа присутствуют поля result, result.message, result.messages, status.
3. В тексте ошибки указано, что отсутствуют обязательные поля.

Постусловия:Нет.

Связанные баги: Нет.

---

### TC-03 — Создание объявления без обязательного поля sellerID
ID: TC-03

Предусловия: Нет.

Тестовые данные:
```json
{
  "name": "krbll",
  "price": 50001,
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным телом запроса без поля sellerID.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. В теле ответа описана ошибка об отсутствии обязательного поля sellerID.

Постусловия: Нет.

Связанные баги: Нет.

---

### TC-04 — Создание объявления без обязательного поля name
ID: TC-04

Предусловия: Нет.

Тестовые данные:
```json
{
  "sellerID": 117177,
  "price": 50001,
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным телом запроса без поля name.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. В теле ответа содержится ошибка об отсутствии обязательного поля name.

Постусловия: Нет.

Связанные баги: Нет.

---

### TC-05 — Создание объявления без обязательного поля price
ID: TC-05

Предусловия: Нет.

Тестовые данные:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным телом запроса без поля price.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. В теле ответа содержится ошибка об отсутствии обязательного поля price.

Постусловия: Нет.

Связанные баги: Нет.

---

### TC-06 — Создание объявления без поля statistics
ID: TC-06

Предусловия: Нет.

Тестовые данные:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "price": 50001
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным телом запроса без поля statistics.

Ожидаемые результаты:
1. Объявление успешно создается.
2. Сервер возвращает HTTP 200 OK.
3. В ответе возвращается корректная структура объявления.
4. Поле statistics присутствует и заполнено значениями по умолчанию (например, нулевыми).

Постусловия:
1. Удалить созданное объявление через DELETE /api/2/item/{id}.

Связанные баги: BUG-02.

---

### TC-07 — Создание объявления с невалидным значением sellerID
ID: TC-07

Предусловия: Нет.

Тестовые данные:
Набор тел запроса с различными невалидными значениями sellerID:
1. sellerID = 0
2. sellerID = ""
3. sellerID = 3.14
4. sellerID = "qwerty"
5. sellerID = -777
Пример общего формата:
```json
{
  "sellerID": "<invalid>",
  "name": "krbll",
  "price": 50001,
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Для каждого варианта payload выполнить POST /api/1/item с соответствующим невалидным значением sellerID.

Ожидаемые результаты:
1. Для каждого запроса сервер возвращает HTTP 400 Bad Request.
2. В теле ответа содержится информация об ошибке валидации поля sellerID.
3. Объявление не создается в системе.

Постусловия: Нет.

Связанные баги: BUG-03.

---

### TC-08 — Создание объявления с невалидным значением поля name
ID: TC-08

Предусловия: Нет.

Тестовые данные:
Используются следующие варианты тел запроса:
1. Пустая строка в поле name.
2. Числовое значение в поле name.
3. Строка с одними спецсимволами в поле name.
4. Строка, состоящая только из пробелов, в поле name.
5. Объект в поле name.
Общий формат:
```json
{
  "sellerID": 117177,
  "name": "<invalid>",
  "price": 50001,
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Для каждого payload с невалидным значением name выполнить POST /api/1/item.

Ожидаемые результаты:
1. Для каждого запроса сервер возвращает HTTP 400 Bad Request.
2. Объявление не создается.
3. В теле ответа содержится информация об ошибке, связанной с полем name.

Постусловия: Нет.

Связанные баги: BUG-09.

---

### TC-09 — Создание объявления с невалидным значением price
ID: TC-09

Предусловия: Нет.

Тестовые данные:
Используются следующие варианты тел запроса:
1. Пустая строка в поле price.
2. Строковое значение "5000" в поле price.
3. Отрицательное число в поле price.
Общий формат:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "price": "<invalid>",
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  }
}
```
Шаги воспроизведения:
1. Для каждого указанного варианта выполнить POST /api/1/item с соответствующим телом запроса.

Ожидаемые результаты:
1. Для каждого запроса сервер возвращает HTTP 400 Bad Request.
2. Объявление не создается в системе.
3. В теле ответа присутствует информация об ошибке валидации поля price.

Постусловия: Нет.

Связанные баги: BUG-04.

---

### TC-10 — Создание объявления с невалидными значениями statistics.likes, statistics.viewCount, statistics.contacts
ID: TC-10

Предусловия: Нет.

Тестовые данные:
Используются следующие варианты тел запроса:
1. Пустой объект statistics.
2. Отрицательное значение likes.
3. Отрицательное значение viewCount.
4. Отрицательное значение contacts.
5. Пустая строка в likes.
6. Пустая строка в viewCount.
7. Пустая строка в contacts.
8. Строка вместо числа в likes.
9. Строка вместо числа в viewCount.
10. Строка вместо числа в contacts.
Общий формат:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "price": 50001,
  "statistics": {
    "likes": "<invalid_likes>",
    "viewCount": "<invalid_viewCount>",
    "contacts": "<invalid_contacts>"
  }
}
```
Шаги воспроизведения:
1. Для каждого payload из набора CREATE_PAYLOAD_INVALID_STATISTICS выполнить POST /api/1/item.

Ожидаемые результаты:
1. Для каждого запроса сервер возвращает HTTP 400 Bad Request.
2. Объявление не создается.
3. В теле ответа содержится ошибка, связанная с полями statistics.likes, statistics.viewCount или statistics.contacts.

Постусловия: Нет.

Связанные баги: BUG-05.

---

### TC-11 — Создание объявления с лишним полем в запросе
ID: TC-11

Предусловия: Нет.

Тестовые данные:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "price": 50001,
  "statistics": {
    "likes": 13,
    "viewCount": 27,
    "contacts": 43
  },
  "padding": "padding"
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным телом запроса, содержащим дополнительное поле padding.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. Объявление не создается.
3. В теле ответа присутствует ошибка о наличии неописанного в контракте поля.

Постусловия: Нет.

Связанные баги: BUG-06.

---

### TC-12 — Создание объявления с нулевыми значениями статистики
ID: TC-12

Предусловия: Нет.

Тестовые данные:
```json
{
  "sellerID": 117177,
  "name": "krbll",
  "price": 50001,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```
Шаги воспроизведения:
1. Выполнить POST /api/1/item с указанным телом запроса.

Ожидаемые результаты:
1. Сервер возвращает HTTP 200 OK.
2. В ответе содержится корректная структура созданного объявления.
3. Поля statistics.likes, statistics.viewCount, statistics.contacts имеют значение 0.

Постусловия:
1. Удалить созданное объявление через DELETE /api/2/item/{id}.

Связанные баги: BUG-10.

---

## 2. GET /api/1/item/{id}

### TC-13 — Успешное получение объявления по ID
ID: TC-13

Предусловия:
1. Создано тестовое объявление с использованием валидного payload.
2. ID созданного объявления сохранен в переменную item_id.

Тестовые данные:
1. Значение item_id ранее созданного объявления.

Шаги воспроизведения:
1. Выполнить GET /api/1/item/{item_id}.

Ожидаемые результаты:
1. Сервер возвращает HTTP 200 OK.
2. Тело ответа содержит список с одним объектом объявления.
3. Поля id, sellerId, name, price, createdAt и statistics совпадают с данными, использованными при создании.
4. Объект statistics содержит корректные значения likes, viewCount, contacts.

Постусловия:
1. Удалить созданное объявление через DELETE /api/2/item/{id}.

Связанные баги: Нет.

---

### TC-14 — Получение объявления по невалидному ID
ID: TC-14

Предусловия: Нет.

Тестовые данные:
1. GET_INVALID_ID = "777".

Шаги воспроизведения:
1. Выполнить GET /api/1/item/777.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. В теле ответа присутствуют поля result, result.message, result.messages, status.
3. Значение status равно строке "400".

Постусловия: Нет.

Связанные баги: Нет.

---

### TC-15 — Получение объявления по несуществующему, но валидному ID
ID: TC-15

Предусловия: Нет.

Тестовые данные:
1. Корректный по формату UUID, которого нет в системе, например:
   GET_NON_EXISTENT_ID = "9c18fc22-0575-4012-98e8-8bdccb677777".

Шаги воспроизведения:
1. Выполнить GET /api/1/item/9c18fc22-0575-4012-98e8-8bdccb677777.

Ожидаемые результаты:
1. Сервер возвращает HTTP 404 Not Found.
2. Тело ответа содержит поля result и status.
3. Значение status равно "404".

Постусловия: Нет.

Связанные баги: Нет.

---

## 3. GET /api/1/{sellerID}/item/

### TC-16 — Успешное получение одного объявления по sellerId
ID: TC-16

Предусловия:
1. Существует одно объявление, созданное через фикстуру item_id2.
2. Объявление принадлежит продавцу с sellerId = 117178.
3. У этого продавца нет других объявлений в системе.

Тестовые данные:
1. sellerId = 117178.
2. item_id2 — идентификатор созданного объявления.

Шаги воспроизведения:
1. Выполнить GET /api/1/117178/item.

Ожидаемые результаты:
1. Сервер возвращает HTTP 200 OK.
2. В ответе содержится список из одного объявления.
3. Все поля объявления совпадают с данными созданного объекта.
4. sellerId и id соответствуют ожидаемым значениям.

Постусловия:
1. Удалить объявление через DELETE /api/2/item/{id}.

Связанные баги: Нет.

---

### TC-17 — Успешное получение нескольких объявлений по sellerId
ID: TC-17

Предусловия:
1. Созданы три объявления через фикстуру item_ids.
2. Все три объявления принадлежат одному продавцу sellerId = 117178.
3. У этого продавца нет других объявлений в системе.

Тестовые данные:
1. sellerId = 117178.
2. item_ids = (id1, id2, id3) — идентификаторы созданных объявлений.

Шаги воспроизведения:
1. Выполнить GET /api/1/117178/item.

Ожидаемые результаты:
1. Сервер возвращает HTTP 200 OK.
2. В ответе содержится список из трех объявлений.
3. Каждый из id1, id2, id3 присутствует в ответе.
4. Нет лишних объявлений.
5. Поля sellerId и id соответствуют ожидаемым значениям.

Постусловия:
1. Удалить все три объявления через DELETE /api/2/item/{id}.

Связанные баги: Нет.

---

### TC-18 — Получение пустого списка объявлений по sellerId
ID: TC-18

Предусловия:
1. Выбран sellerId, для которого в системе нет ни одного объявления.

Тестовые данные:
1. Значение SELLER_ID2 без объявлений.

Шаги воспроизведения:
1. Выполнить GET /api/1/{SELLER_ID2}/item.

Ожидаемые результаты:
1. Сервер возвращает HTTP 200 OK.
2. Тело ответа представляет собой пустой список:
```json
[]
```

Постусловия: Нет.

Связанные баги: Нет.

---

### TC-19 — Получение объявлений по невалидному sellerId
ID: TC-19

Предусловия: Нет.

Тестовые данные:
1. seller_id принимает значения из набора: 0, -1, 3.14, "qwerty".

Шаги воспроизведения:
1. Для каждого значения seller_id выполнить GET /api/1/{seller_id}/item.

Ожидаемые результаты:
1. Для каждого невалидного seller_id сервер возвращает HTTP 400 Bad Request.
2. Тело ответа содержит корректную JSON-структуру согласно контракту.
3. В ответе присутствуют поля result и status.
4. Значение status равно строке "400".
5. В объекте result присутствуют поля message и messages.

Постусловия: Нет.

Связанные баги: BUG-03, BUG-07.

---

## 4. GET /api/1/statistic/{id} и GET /api/2/statistic/{id}

### TC-20 — Успешное получение статистики объявления (v1 и v2)
ID: TC-20

Предусловия:
1. С помощью фикстуры item_id2 создано тестовое объявление.
2. При создании использован валидный payload, содержащий статистику likes, viewCount, contacts.

Тестовые данные:
1. item_id2 — идентификатор созданного объявления.

Шаги воспроизведения:
1. Выполнить GET /api/1/statistic/{item_id2}.
2. Выполнить GET /api/2/statistic/{item_id2}.

Ожидаемые результаты:
1. Для обоих запросов сервер возвращает HTTP 200 OK.
2. Тело ответа в каждом случае представляет собой список с одним объектом:
```json
[
  {
    "likes": <int>,
    "viewCount": <int>,
    "contacts": <int>
  }
]
```
3. Значения likes, viewCount, contacts совпадают с теми, что были переданы при создании объявления.

Постусловия:
1. Удалить созданное объявление через DELETE /api/2/item/{id} или соответствующую фикстуру.

Связанные баги: Нет.

---

### TC-21 — Получение статистики по невалидному ID (API v1)
ID: TC-21

Предусловия: Нет.

Тестовые данные:
1. GET_INVALID_ID = "777".

Шаги воспроизведения:
1. Выполнить GET /api/1/statistic/777.

Ожидаемые результаты:
1. Сервер возвращает HTTP 400 Bad Request.
2. В теле ответа присутствуют поля result и status.
3. Значение status равно строке "400".
4. В объекте result присутствуют поля message и messages.

Постусловия: Нет.

Связанные баги: Нет.

---

### TC-22 — Получение статистики по невалидному ID (API v2)
ID: TC-22

Предусловия: Нет.

Тестовые данные:
1. GET_INVALID_ID = "777".

Шаги воспроизведения:
1. Выполнить GET /api/2/statistic/777.

Ожидаемые результаты:
1. В соответствии с описанием в swagger для ошибочного сценария ожидается HTTP 404 Not Found.
2. Структура ответа содержит поля result и status.
3. В объекте result присутствуют поля message и messages.
4. Значение status должно соответствовать HTTP-коду ответа.

Постусловия: Нет.

Связанные баги: BUG-08.

---

### TC-23 — Получение статистики по несуществующему ID (API v1 и v2)
ID: TC-23

Предусловия: Нет.

Тестовые данные:
1. Несуществующий ID: GET_NON_EXISTENT_ID = "9c18fc22-0575-4012-98e8-8bdccb677777".

Шаги воспроизведения:
1. Выполнить GET /api/1/statistic/{GET_NON_EXISTENT_ID}.
2. Выполнить GET /api/2/statistic/{GET_NON_EXISTENT_ID}.

Ожидаемые результаты:
1. Для обоих запросов сервер возвращает HTTP 404 Not Found.
2. Тело ответа содержит поле status со значением "404".
3. В объекте result присутствуют поля message и messages.

Постусловия: Нет.

Связанные баги: Нет.
